
{
  "entities": {
    "task": {
      "title": "Task",
      "description": "A single task item.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns the task."
        },
        "title": {
          "type": "string",
          "description": "The title of the task."
        },
        "description": {
          "type": "string",
          "description": "The description of the task."
        },
        "dueDate": {
          "type": "string",
          "format": "date-time",
          "description": "The due date of the task."
        },
        "priority": {
          "type": "string",
          "enum": ["low", "medium", "high"],
          "description": "The priority of the task."
        },
        "reminder": {
            "type": "string",
            "enum": ["none", "on-time", "10-min-before", "1-hour-before"],
            "description": "When to send a reminder notification."
        },
        "completed": {
          "type": "boolean",
          "description": "Whether the task is completed."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The creation date of the task."
        },
        "notificationSent": {
            "type": "boolean",
            "description": "Whether a reminder notification has been sent for the task."
        }
      },
      "required": ["userId", "title", "priority", "completed", "createdAt"]
    },
    "subscription": {
      "title": "Push Subscription",
      "description": "A push notification subscription for a user.",
      "type": "object",
      "properties": {
        "endpoint": {
          "type": "string"
        },
        "expirationTime": {
          "type": ["number", "null"]
        },
        "keys": {
          "type": "object",
          "properties": {
            "p256dh": {
              "type": "string"
            },
            "auth": {
              "type": "string"
            }
          },
          "required": ["p256dh", "auth"]
        }
      },
      "required": ["endpoint", "keys"]
    },
    "userProfile": {
      "title": "User Profile",
      "description": "Stores public-facing user profile information.",
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "photoURL": {
          "type": "string",
          "description": "URL for the user's profile picture."
        }
      }
    },
     "googleCalendar": {
      "title": "Google Calendar",
      "description": "Stores Google Calendar API tokens for a user.",
      "type": "object",
      "properties": {
        "accessToken": {
          "type": "string",
          "description": "The access token for the Google Calendar API."
        },
        "refreshToken": {
          "type": "string",
          "description": "The refresh token for the Google Calendar API."
        },
        "expiryDate": {
          "type": "number",
          "description": "The expiry date of the access token."
        }
      },
      "required": ["accessToken", "refreshToken", "expiryDate"]
    }
  },
  "auth": {
    "providers": ["email", "google"]
  },
  "firestore": {
    "/tasks/{taskId}": {
      "schema": {
        "$ref": "#/entities/task"
      },
      "description": "Stores all the tasks for the application."
    },
    "/subscriptions/{userId}": {
      "schema": {
        "$ref": "#/entities/subscription"
      },
      "description": "Stores user push notification subscriptions."
    },
     "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/userProfile"
      },
      "description": "Stores public user profile data."
    },
    "/googleCalendarTokens/{userId}": {
        "schema": {
            "$ref": "#/entities/googleCalendar"
        },
        "description": "Stores Google Calendar API tokens for each user."
    }
  }
}
